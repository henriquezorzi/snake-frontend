{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/joaos/snake-frontend/src/app/jogo/JogarDeNovo.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport \"@fontsource/press-start-2p\";\n\ninterface JogarDeNovoProps {\n  onRestart: () => void;\n}\n\nconst JogarDeNovo: React.FC<JogarDeNovoProps> = ({ onRestart }) => {\n  const [hoverRestart, setHoverRestart] = useState(false);\n  const [hoverMenu, setHoverMenu] = useState(false);\n\n  const baseStyle: React.CSSProperties = {\n    padding: \"12px 20px\",\n    borderRadius: \"5px\",\n    cursor: \"pointer\",\n    fontWeight: \"bold\",\n    transition: \"background 0.2s, color 0.2s, border-color 0.2s\",\n    textDecoration: \"none\",\n    display: \"block\",\n    textAlign: \"center\",\n    fontFamily: \"'Press Start 2P', cursive\", \n  };\n\n  const restartButtonStyle: React.CSSProperties = {\n    ...baseStyle,\n    fontSize: \"1.2em\",\n    background: hoverRestart ? \"yellow\" : \"white\",\n    color: \"black\",\n    border: \"none\",\n    boxShadow: hoverRestart ? \"0 4px 0 #ccaa00\" : \"0 4px 0 #333\",\n  };\n\n  const menuLinkStyle: React.CSSProperties = {\n    ...baseStyle,\n    fontSize: \"1.1em\",\n    background: hoverMenu ? \"yellow\" : \"transparent\",\n    color: hoverMenu ? \"black\" : \"white\",\n    border: hoverMenu ? \"2px solid yellow\" : \"2px solid white\",\n  };\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        backgroundColor: \"rgba(0, 0, 0, 0.9)\",\n        zIndex: 10,\n      }}\n    >\n      <h2\n        style={{\n          color: \"yellow\",\n          fontSize: \"2.5em\",\n          marginBottom: \"30px\",\n          fontFamily: \"'Press Start 2P', cursive\", \n          letterSpacing: \"2px\",\n          textShadow: `\n            2px 2px 0 #000,\n            -2px 2px 0 #000,\n            2px -2px 0 #000,\n            -2px -2px 0 #000\n          `,\n        }}\n      >\n        GAME OVER!\n      </h2>\n\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: \"15px\",\n          width: \"80%\",\n          maxWidth: \"250px\",\n        }}\n      >\n        <button\n          onClick={onRestart}\n          style={restartButtonStyle}\n          onMouseEnter={() => setHoverRestart(true)}\n          onMouseLeave={() => setHoverRestart(false)}\n          title=\"Inicia uma nova partida\"\n        >\n          JOGAR DE NOVO\n        </button>\n\n        <Link\n          href=\"/\"\n          style={menuLinkStyle}\n          onMouseEnter={() => setHoverMenu(true)}\n          onMouseLeave={() => setHoverMenu(false)}\n        >\n          VOLTAR AO MENU\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default JogarDeNovo;\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;;AAUA,MAAM,cAA0C,CAAC,EAAE,SAAS,EAAE;IAC5D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sOAAQ,EAAC;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sOAAQ,EAAC;IAE3C,MAAM,YAAiC;QACrC,SAAS;QACT,cAAc;QACd,QAAQ;QACR,YAAY;QACZ,YAAY;QACZ,gBAAgB;QAChB,SAAS;QACT,WAAW;QACX,YAAY;IACd;IAEA,MAAM,qBAA0C;QAC9C,GAAG,SAAS;QACZ,UAAU;QACV,YAAY,eAAe,WAAW;QACtC,OAAO;QACP,QAAQ;QACR,WAAW,eAAe,oBAAoB;IAChD;IAEA,MAAM,gBAAqC;QACzC,GAAG,SAAS;QACZ,UAAU;QACV,YAAY,YAAY,WAAW;QACnC,OAAO,YAAY,UAAU;QAC7B,QAAQ,YAAY,qBAAqB;IAC3C;IAEA,qBACE,mQAAC;QACC,OAAO;YACL,UAAU;YACV,KAAK;YACL,MAAM;YACN,OAAO;YACP,QAAQ;YACR,SAAS;YACT,eAAe;YACf,gBAAgB;YAChB,YAAY;YACZ,iBAAiB;YACjB,QAAQ;QACV;;0BAEA,mQAAC;gBACC,OAAO;oBACL,OAAO;oBACP,UAAU;oBACV,cAAc;oBACd,YAAY;oBACZ,eAAe;oBACf,YAAY,CAAC;;;;;UAKb,CAAC;gBACH;0BACD;;;;;;0BAID,mQAAC;gBACC,OAAO;oBACL,SAAS;oBACT,eAAe;oBACf,KAAK;oBACL,OAAO;oBACP,UAAU;gBACZ;;kCAEA,mQAAC;wBACC,SAAS;wBACT,OAAO;wBACP,cAAc,IAAM,gBAAgB;wBACpC,cAAc,IAAM,gBAAgB;wBACpC,OAAM;kCACP;;;;;;kCAID,mQAAC,4LAAI;wBACH,MAAK;wBACL,OAAO;wBACP,cAAc,IAAM,aAAa;wBACjC,cAAc,IAAM,aAAa;kCAClC;;;;;;;;;;;;;;;;;;AAMT;uCAEe","debugId":null}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///home/joaos/snake-frontend/src/app/jogo/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport JogarDeNovo from \"./JogarDeNovo\";\nimport \"@fontsource/press-start-2p\";\nimport { JSX } from \"react/jsx-runtime\";\n\nconst CELL_SIZE = 30;\nconst GRID_SIZE = 30;\n\nconst SNAKE_COLOR = \"limegreen\";\nconst APPLE_COLOR = \"yellow\";\nconst GRID_COLOR_DARK = \"#1a1a1a\";\nconst GRID_COLOR_LIGHT = \"#2e2e2e\";\n\ntype Point = { x: number; y: number };\ntype Dir = \"UP\" | \"DOWN\" | \"LEFT\" | \"RIGHT\";\n\nconst INITIAL_SNAKE: Point[] = [{ x: 8, y: 8 }];\nconst INITIAL_APPLE: Point = { x: 12, y: 12 };\n\nexport default function Page(): JSX.Element {\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const intervalRef = useRef<number | null>(null);\n\n  // estados para render\n  const [snake, setSnake] = useState<Point[]>(INITIAL_SNAKE);\n  const [apple, setApple] = useState<Point>(INITIAL_APPLE);\n  const [score, setScore] = useState(0);\n  const [isDead, setIsDead] = useState(false);\n  const [speed, setSpeed] = useState(150);\n\n  // refs para a l√≥gica real\n  const snakeRef = useRef<Point[]>(INITIAL_SNAKE);\n  const directionRef = useRef<Dir>(\"RIGHT\");\n  const nextDirectionRef = useRef<Dir>(\"RIGHT\");\n\n  const playerName =\n    typeof window !== \"undefined\" ? localStorage.getItem(\"nomeJogador\") : null;\n  const playerId =\n    typeof window !== \"undefined\" ? localStorage.getItem(\"jogadorId\") : null;\n\n  function draw(ctx: CanvasRenderingContext2D) {\n    for (let x = 0; x < GRID_SIZE; x++) {\n      for (let y = 0; y < GRID_SIZE; y++) {\n        ctx.fillStyle =\n          (x + y) % 2 === 0 ? GRID_COLOR_DARK : GRID_COLOR_LIGHT;\n        ctx.fillRect(x * CELL_SIZE, y * CELL_SIZE, CELL_SIZE, CELL_SIZE);\n      }\n    }\n\n    ctx.fillStyle = SNAKE_COLOR;\n    snakeRef.current.forEach((seg) => {\n      ctx.fillRect(seg.x * CELL_SIZE, seg.y * CELL_SIZE, CELL_SIZE, CELL_SIZE);\n    });\n\n    ctx.fillStyle = APPLE_COLOR;\n    ctx.fillRect(apple.x * CELL_SIZE, apple.y * CELL_SIZE, CELL_SIZE, CELL_SIZE);\n  }\n\n  function saveScoreRemote(finalScore: number) {\n    if (!playerId) return;\n    axios\n      .put(`http://localhost:4000/jogadores/${playerId}/score`, {\n        score: finalScore,\n      })\n      .then(() => console.log(\"Score salvo/atualizado com sucesso!\"))\n      .catch((err) => console.error(\"Erro ao salvar score:\", err));\n  }\n\n  function gameOver() {\n    setIsDead(true);\n    saveScoreRemote(score);\n  }\n\n  function restartGame() {\n    snakeRef.current = INITIAL_SNAKE;\n    directionRef.current = \"RIGHT\";\n    nextDirectionRef.current = \"RIGHT\";\n\n    setSnake(INITIAL_SNAKE);\n    setApple(INITIAL_APPLE);\n    setScore(0);\n    setSpeed(150);\n    setIsDead(false);\n  }\n\n  function step() {\n    const snake = snakeRef.current;\n    const dir = nextDirectionRef.current;\n\n    directionRef.current = dir;\n\n    const head = { ...snake[0] };\n    if (dir === \"UP\") head.y--;\n    if (dir === \"DOWN\") head.y++;\n    if (dir === \"LEFT\") head.x--;\n    if (dir === \"RIGHT\") head.x++;\n\n    // colis√µes\n    if (\n      head.x < 0 ||\n      head.y < 0 ||\n      head.x >= GRID_SIZE ||\n      head.y >= GRID_SIZE ||\n      snake.some((seg, i) => i !== 0 && seg.x === head.x && seg.y === head.y)\n    ) {\n      gameOver();\n      return;\n    }\n\n    let newSnake = [head, ...snake];\n    if (head.x === apple.x && head.y === apple.y) {\n      setScore((s) => s + 10);\n      setSpeed((prev) => Math.max(80, prev - 3));\n\n      let newApple: Point;\n      do {\n        newApple = {\n          x: Math.floor(Math.random() * GRID_SIZE),\n          y: Math.floor(Math.random() * GRID_SIZE),\n        };\n      } while (newSnake.some((seg) => seg.x === newApple.x && seg.y === newApple.y));\n      setApple(newApple);\n    } else {\n      newSnake.pop();\n    }\n\n    snakeRef.current = newSnake;\n    setSnake(newSnake);\n  }\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    draw(ctx);\n\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n\n    if (isDead) return;\n\n    intervalRef.current = window.setInterval(() => {\n      step();\n      const ctx2 = canvas.getContext(\"2d\");\n      if (ctx2) draw(ctx2);\n    }, speed);\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n    };\n  }, [apple, isDead, speed]);\n\n  useEffect(() => {\n    const handleKey = (e: KeyboardEvent) => {\n      const dir = directionRef.current;\n\n      if (e.key === \"ArrowUp\" && dir !== \"DOWN\") nextDirectionRef.current = \"UP\";\n      if (e.key === \"ArrowDown\" && dir !== \"UP\") nextDirectionRef.current = \"DOWN\";\n      if (e.key === \"ArrowLeft\" && dir !== \"RIGHT\") nextDirectionRef.current = \"LEFT\";\n      if (e.key === \"ArrowRight\" && dir !== \"LEFT\") nextDirectionRef.current = \"RIGHT\";\n    };\n\n    document.addEventListener(\"keydown\", handleKey);\n    return () => document.removeEventListener(\"keydown\", handleKey);\n  }, []);\n\n  return (\n    <div style={{ textAlign: \"center\", minHeight: \"100vh\", background: \"#111\" }}>\n      <h1\n        style={{\n          color: \"white\",\n          fontSize: \"2.5em\",\n          fontFamily: \"'Press Start 2P', cursive\",\n        }}\n      >\n        üêç SNAKE üêç\n      </h1>\n\n      <p style={{ color: \"white\", fontFamily: \"'Press Start 2P', cursive\" }}>\n        Jogador: {playerName || \"Convidado\"}\n      </p>\n      <p style={{ color: \"yellow\", fontFamily: \"'Press Start 2P', cursive\" }}>\n        Pontua√ß√£o: {score}\n      </p>\n\n      <div\n        style={{\n          position: \"relative\",\n          width: CELL_SIZE * GRID_SIZE,\n          margin: \"20px auto\",\n        }}\n      >\n        <canvas\n          ref={canvasRef}\n          width={CELL_SIZE * GRID_SIZE}\n          height={CELL_SIZE * GRID_SIZE}\n          style={{ border: \"2px solid white\", background: GRID_COLOR_DARK }}\n        />\n        {isDead && <JogarDeNovo onRestart={restartGame} />}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}